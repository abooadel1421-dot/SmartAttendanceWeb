{# app/templates/admin/system_settings.html #}  
{% extends "admin/base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}  

{% block admin_content %}  
    <div class="container-fluid">  
        <h1 class="mb-4">إعدادات النظام</h1>  

        {# رسائل الفلاش (Flash Messages) #}  
        {% with messages = get_flashed_messages(with_categories=true) %}  
            {% if messages %}  
                {% for category, message in messages %}  
                    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">  
                        {{ message }}  
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">  
                            <span aria-hidden="true">&times;</span>  
                        </button>  
                    </div>  
                {% endfor %}  
            {% endif %}  
        {% endwith %}  

        <div class="card shadow mb-4">  
            <div class="card-header py-3">  
                <h6 class="m-0 font-weight-bold text-primary">تعديل الإعدادات العامة</h6>  
            </div>  
            <div class="card-body">  
                <form action="" method="post">  
                    {{ form.hidden_tag() }}  

                    <div class="row">  
                        <div class="col-md-6">  
                            {{ wtf.form_field(form.system_name) }}  
                        </div>  
                        <div class="col-md-6">  
                            {{ wtf.form_field(form.records_per_page) }}  
                        </div>  
                    </div>  

                    <div class="row mt-3">  
                        <div class="col-md-6">  
                            {{ wtf.form_field(form.email_notifications_enabled) }}  
                        </div>  
                        <div class="col-md-6">  
                            {{ wtf.form_field(form.default_access_policy) }}  
                        </div>  
                    </div>  

                    <div class="row mt-3">  
                        <div class="col-md-12">  
                            {{ wtf.form_field(form.allowed_time_range_start) }}  
                        </div>  
                    </div>  

                    <div class="row mt-3">  
                        <div class="col-md-12">  
                            {{ wtf.form_field(form.allowed_time_range_end) }}  
                        </div>  
                    </div>  

                    <div class="form-group mt-4">  
                        {{ wtf.form_field(form.submit, class="btn btn-primary") }}  
                    </div>  
                </form>  
            </div>  
        </div>  
    </div>  
{% endblock %}