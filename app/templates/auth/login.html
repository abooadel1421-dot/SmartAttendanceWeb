{# app/templates/auth/login.html #}  
{% extends "public_base.html" %} {# <--- تم التعديل هنا #}  

{% block content %}  
    <div class="row justify-content-center">  
        <div class="col-md-6 col-lg-4">  
            <div class="card mt-5 shadow">  
                <div class="card-header text-center bg-primary text-white">  
                    <h4 class="mb-0">  
                        {% if requested_role == 'admin' %}  
                            تسجيل الدخول كـ "مدير"  
                        {% elif requested_role == 'teacher' %}  
                            تسجيل الدخول كـ "معلم"  
                        {% elif requested_role == 'student' %}  
                            تسجيل الدخول كـ "طالب"  
                        {% else %}  
                            تسجيل الدخول  
                        {% endif %}  
                    </h4> {# <--- تم التعديل هنا لإظهار الدور #}  
                </div>  
                <div class="card-body">  
                    {# تم إزالة عرض رسائل Flash هنا لأنها موجودة بالفعل في public_base.html #}  

                    <form method="POST" action="{{ url_for('auth_bp.login', role=requested_role) }}" novalidate> {# <--- تم التعديل هنا لتمرير الدور في action #}  
                        {{ form.hidden_tag() }}  
                        
                        {# حقل اسم المستخدم #}  
                        <div class="mb-3">  
                            {{ form.username.label(class="form-label") }}  
                            {{ form.username(class="form-control" + (" is-invalid" if form.username.errors else ""), placeholder="أدخل اسم المستخدم") }}  
                            {% if form.username.errors %}  
                                <div class="invalid-feedback">  
                                    {% for error in form.username.errors %}  
                                        {{ error }}  
                                    {% endfor %}  
                                </div>  
                            {% endif %}  
                        </div>  
                        
                        {# حقل كلمة المرور #}  
                        <div class="mb-3">  
                            {{ form.password.label(class="form-label") }}  
                            {{ form.password(class="form-control" + (" is-invalid" if form.password.errors else ""), placeholder="أدخل كلمة المرور") }}  
                            {% if form.password.errors %}  
                                <div class="invalid-feedback">  
                                    {% for error in form.password.errors %}  
                                        {{ error }}  
                                    {% endfor %}  
                                </div>  
                            {% endif %}  
                        </div>  
                        
                        {# خيار تذكرني #}  
                        <div class="mb-3 form-check">  
                            {{ form.remember_me(class="form-check-input") }}  
                            {{ form.remember_me.label(class="form-check-label") }}  
                        </div>  
                        
                        {# زر تسجيل الدخول #}  
                        <div class="d-grid">  
                            {{ form.submit(class="btn btn-primary btn-lg") }}  
                        </div>  
                    </form>  
                    
                    <hr class="my-4">  

                </div>  
            </div>  
        </div>  
    </div>  
{% endblock %}