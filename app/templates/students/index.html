{% extends 'base.html' %}  

{% block content %}  
    <h1 class="mb-4">إدارة الطلاب</h1>  
    <p>  
        <a href="{{ url_for('students.add_student') }}" class="btn btn-primary">إضافة طالب جديد</a>  
    </p>  
    {% if students %}  
        <div class="table-responsive">  
            <table class="table table-striped table-hover">  
                <thead>  
                    <tr>  
                        <th>رقم التعريف</th>  
                        <th>الاسم الكامل</th>  
                        <th>البريد الإلكتروني</th>  
                        <th>الصف</th>  
                        <th>نشط</th>  
                        <th>الإجراءات</th>  
                    </tr>  
                </thead>  
                <tbody>  
                    {% for student in students %}  
                    <tr>  
                        <td>{{ student.student_id_number }}</td>  
                        <td><a href="{{ url_for('students.view_student', id=student.id) }}">{{ student.first_name }} {{ student.last_name }}</a></td>  
                        <td>{{ student.email or 'N/A' }}</td>  
                        <td>{{ student.grade or 'N/A' }}</td>  
                        <td>  
                            {% if student.is_active %}  
                                <span class="badge bg-success">نعم</span>  
                            {% else %}  
                                <span class="badge bg-danger">لا</span>  
                            {% endif %}  
                        </td>  
                        <td>  
                            <a href="{{ url_for('students.edit_student', id=student.id) }}" class="btn btn-sm btn-info me-1">تعديل</a>  
                            <form action="{{ url_for('students.delete_student', id=student.id) }}" method="post" style="display:inline;" onsubmit="return confirm('هل أنت متأكد من حذف هذا الطالب؟')">  
                                <button type="submit" class="btn btn-sm btn-danger">حذف</button>  
                            </form>  
                        </td>  
                    </tr>  
                    {% endfor %}  
                </tbody>  
            </table>  
        </div>  

        <nav aria-label="Page navigation">  
            <ul class="pagination justify-content-center">  
                <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">  
                    <a class="page-link" href="{{ url_for('students.index', page=pagination.prev_num) if pagination.has_prev else '#' }}" tabindex="-1" aria-disabled="true">السابق</a>  
                </li>  
                {% for p in pagination.iter_pages() %}  
                    {% if p %}  
                        <li class="page-item {% if p == pagination.page %}active{% endif %}">  
                            <a class="page-link" href="{{ url_for('students.index', page=p) }}">{{ p }}</a>  
                        </li>  
                    {% else %}  
                        <li class="page-item disabled"><a class="page-link">...</a></li>  
                    {% endif %}  
                {% endfor %}  
                <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">  
                    <a class="page-link" href="{{ url_for('students.index', page=pagination.next_num) if pagination.has_next else '#' }}">التالي</a>  
                </li>  
            </ul>  
        </nav>  
    {% else %}  
        <div class="alert alert-info" role="alert">  
            لا يوجد طلاب مسجلون حاليًا.  
        </div>  
    {% endif %}  
{% endblock %}